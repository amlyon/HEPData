A search for long-lived heavy neutrinos (N) in the decays of B mesons produced in proton-proton collisions at $\sqrt{s} = 13~\mathrm{TeV}$ is presented. It uses a data sample corresponding to an integrated luminosity of $41.6~\mathrm{fb}^{-1}$ collected in 2018 by the CMS experiment at the CERN LHC, using a dedicated data stream that enhances the number of recorded events containing B mesons. The search probes neutrinos with masses in the range $1 < m_\mathrm{N} < 3\,\mathrm{GeV}$ and decay lengths in the range $10^{-2} < c\tau_{\mathrm{N}} < 10^{4}~\mathrm{mm}$, where $\tau_\mathrm{N}$ is the N proper mean lifetime. Signal events are defined by the signature $\mathrm{B} \rightarrow \ell_\mathrm{B} \mathrm{N} \mathrm{X}$; $\mathrm{N} \rightarrow \ell^{\pm} \pi^{\mp}$, where the leptons $\ell_\mathrm{B}$ and $\ell$ can be either a muon or an electron, provided that at least one of them is a muon. The hadronic recoil system, X, is treated inclusively and is not reconstructed. No significant excess of events over the standard model background is observed in any of the $\ell^{\pm}\pi^{\mp}$ invariant mass distribution. Limits at $95\%$ confidence level on the sum of the square of the mixing amplitudes, $|V_\mathrm{N}|^2$, between heavy and light neutrinos and on $c\tau_{\mathrm{N}}$ are obtained in different mixing scenarios for both Majorana and Dirac-like $\mathrm{N}$ particles. The most stringent upper limit $|V_\mathrm{N}|^2 < 2.0\times 10^{-5}$ is obtained at mass $m_{\mathrm{N}}=1.95\,\mathrm{GeV}$ for the Majorana case where N mixes exclusively with muon neutrinos. The limits on $|V_\mathrm{N}|^2$ for masses $1<m_{\mathrm{N}}<1.7\,\mathrm{GeV}$ are the most stringent from a collider experiment to date.
